# Log warnings and errors to stderr
log level debug;

# Log everything to syslog
log to syslog level info;

# Set the interface name
interface "mesh-vpn";

# Support salsa2012+umac and null methods, prefer salsa2012+umac
method "salsa2012+umac";
method "null";

# Bind to a fixed port, IPv4 only
bind {{ fastd[inventory_hostname]['remote'] }}:10000;
# bind 0.0.0.0:10000;

# Secret key generated by `fastd --generate-key`
secret "{{ fastd[inventory_hostname]['secret'] }}";

# Set the interface MTU for TAP mode with xsalsa20/aes128 over IPv4 with a base MTU of 1492 (PPPoE)
# (see MTU selection documentation)
mtu 1426;

on up "
#  ip link set up $INTERFACE
  /sbin/ifconfig mesh-vpn {{ fastd[inventory_hostname]['ip'] }}
#   ip link set up dev $INTERFACE
 ";


# Include peers from the directory 'peers'
include peers from "peers";
